pico-8 cartridge // http://www.pico-8.com
version 27
__lua__

t = 0
period = 60
centerx = 64
centery = 64
distances = {}
periods = {}
function _update()
	if (btn(0)) centerx -= 1 
	if (btn(1)) centerx += 1 
	if (btn(2)) centery -= 1
	if (btn(3)) centery += 1
end
function _draw()
	cls()
	usedDict = false
	for y = -16, 144, 4 do
		for x = -16, 144, 4  do
			ab = (centerx-x)^2+(centery-y)^2
			if (distances[ab] == nil) then
				distances[ab] = sqrt(ab)
				dist = sqrt(ab)
			else
				dist = distances[ab]
				
			end			
			fy = (t-dist) --The further from the centre, the further shifted
			fx = t-dist
			--[[if (periods[fy/period] == nil) then
				periods[fy/period] = sin(fy/period)
				yoffset = sin(fy/period)*10
				
			else
				yoffset = periods[fy/period]*10
				usedDict = true
			end]]--
			 --pico-8 does angles as fractions of a turn 0-1
			yoffset = (sin((fy/period)))*8
			xoffset = 1+0*(cos((fx/period)))*8	
			colour = (t/120+(xoffset+yoffset)/4)%7+8 --Cycle through the rainbow depending on where you are in the cycle, and shift the colour for each point along occasionally
			pset(x+xoffset,y+yoffset, colour)
			
			
		end
	end

	t += 1
	print(stat(7), 4, 4, 7)
end

function print_table(table)
	print("Printing table")
	for k,v in pairs(table) do
		print(k)
	end	
end

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
0000000000000800000000000000000000000000000000000a000a00000000000000000000000a000a0000000000000000000000000000000000080000000000
0e0000000000000000000000000009000000000000000000000000000a000a000a000a000a000000000000000000000000000900000000000000000000000000
000008000000000009000000000000000a000000000000000000000000000000000000000000000000000000000000000a000000000000000900000000000800
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000777077700000000009000000000000000a0000000000000000000000000000000000000000000000000000000a0000000000000009000000000008000000
00000070707000000000000000000000000000000a000b000000000000000000000000000000000000000b000a00000000000000000000000000000000000000
0800077070700900000000000a00000000000000000000000b000b00000000000000000000000b000b00000000000000000000000a0000000000090000000000
000000707070000000000000000000000000000000000000000000000b000b000b000b000b000000000000000000000000000000000000000000000000000000
00007770777000000000000000000a00000000000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000800
000000000000000009000000000000000a000000000000000000000000000000000000000000000000000000000000000a000000000000000900000000000000
0000000009000000000000000000000000000b0000000000000000000000000000000000000000000000000000000b0000000000000000000000000009000000
000000000000000000000a0000000000000000000b000b000b000b000b000b0000000b000b000b000b000b000b0000000000000000000a000000000000000000
0800000000000000000000000a000000000000000000000000000000000000000b000000000000000000000000000000000000000a0000000000000000000000
00000000000009000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000090000000000
00000900000000000000000000000b00000000000000000000000000000000000000000000000000000000000000000000000b00000000000000000000000900
00000000000000000a000000000000000b000b000b000b000b000b000b000b000b000b000b000b000b000b000b000b000b000000000000000a00000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
090000000900000000000a00000000000000000000000000000000000b000a000a000a000b00000000000000000000000000000000000a000000000009000000
0000000000000000000000000b00000000000000000000000b000b000a000a000a000a000a000b000b00000000000000000000000b0000000000000000000000
0000000000000a000000000000000b000b000b000b000b0000000a00090009000900090009000a0000000b000b000b000b000b000000000000000a0000000000
0000090000000000000000000000000000000000000000000a0009000800080008000800080009000a0000000000000000000000000000000000000000000900
00000000000000000a000000000000000000000000000a000a0008000800080008000800080008000a000a000000000000000000000000000a00000000000000
000000000000000000000b0000000000000000000b000a000900080000000000000000000000080009000a000b0000000000000000000b000000000000000000
090000000a000000000000000b0000000b000b0000000900080000000000000000000000000000000800090000000b000b0000000b000000000000000a000000
00000000000000000000000000000b00000000000a00080000000e000e000e000e000e000e000e00000008000a00000000000b00000000000000000000000000
0000000000000a00000000000000000000000a00090000000e0000000000000000000000000000000e00000009000a00000000000000000000000a0000000000
00000a00000000000b000000000000000b000000090008000000000000000000000000000000000000000800090000000b000000000000000b00000000000a00
000000000000000000000b000b000b0000000a0000000000000000000000000000000000000000000000000000000a0000000b000b000b000000000000000000
000000000a00000000000000000000000a00090008000e000e000e000e000e000e000e000e000e000e000e00080009000a00000000000000000000000a000000
09000000000000000000000000000000000009000800000000000000000000000000000000000000000000000800090000000000000000000000000000000000
0000000000000b000000000000000b000a000000000000000000000000000000000000000000000000000000000000000a000b000000000000000b0000000000
00000000000000000b000b000b0000000000080000000000000000000000000000000000000000000000000000000800000000000b000b000b00000000000000
00000a00000000000000000000000a00090000000e000e000e000e000e000000000000000e000e000e000e000e00000009000a00000000000000000000000a00
0000000000000000000000000000000009000800000000000000000000000e0008000e0000000000000000000000080009000000000000000000000000000000
0a0000000b000000000000000b000a00000000000000000000000000000000000000000000000000000000000000000000000a000b000000000000000b000000
0000000000000b0000000b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b0000000b0000000000
00000000000000000b0000000a00090008000e000e000e000e0000000000000000000000000000000e000e000e000e00080009000a0000000b00000000000000
00000a00000000000000000000000000000000000000000000000800000000000000000000000800000000000000000000000000000000000000000000000a00
000000000000000000000b000000090008000000000000000000000008000000000000000800000000000000000000000800090000000b000000000000000000
000000000b000b000b0000000a0000000000000000000000000000000000080000000800000000000000000000000000000000000a0000000b000b000b000000
0a00000000000000000000000000080000000e000e000e000000000000000000080000000000000000000e000e000e0000000800000000000000000000000000
000000000000000000000a00090000000e000000000000000000000000000000000000000000000000000000000000000e00000009000a000000000000000000
00000b00000000000000000000000000000000000000000008000000000000000000000000000000080000000000000000000000000000000000000000000b00
000000000b000b000b00000009000800000000000000000000000000000000000000000000000000000000000000000000000800090000000b000b000b000000
000000000000000000000a00000000000e000e000e00000000000800000000000000000000000800000000000e000e000e00000000000a000000000000000000
0a000000000000000000000000000000000000000000080000000000090000000000000009000000000008000000000000000000000000000000000000000000
00000000000000000b000a000900080000000000000000000000000000000900000009000000000000000000000000000000080009000a000b00000000000000
00000b000b000b0000000000000000000000000000000000000000000000000009000000000000000000000000000000000000000000000000000b000b000b00
000000000000000000000000000000000e000e000e00000008000000000000000000000000000000080000000e000e000e000000000000000000000000000000
0b000000000000000a000a000800080000000000000000000000000000000000000000000000000000000000000000000000080008000a000a00000000000000
00000000000000000000000000000000000000000000080000000900000000000000000000000900000008000000000000000000000000000000000000000000
00000b000b000b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b000b000b00
00000000000000000a000900080000000e000e0000000000000000000900000000000000090000000000000000000e000e000000080009000a00000000000000
00000000000000000000000000000800000000000e0000000900000000000a0000000a0000000000090000000e00000000000800000000000000000000000000
0b00000000000b000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000b0000000000
00000b000b0000000a00090000000000000000000000080000000000000000000000000000000000000008000000000000000000000009000a0000000b000b00
000000000000000000000000080000000e000e0000000000000009000000000000000000000009000000000000000e000e000000080000000000000000000000
00000000000000000000000000000800000000000800000000000000000000000000000000000000000000000800000000000800000000000000000000000000
0b00000000000b000a00000000000000000000000000000009000000000000000000000000000000090000000000000000000000000000000a000b0000000000
00000b000b00000000000900000000000000000000000000000000000a000000000000000a00000000000000000000000000000000000900000000000b000b00
000000000000000000000000080000000e000e00000008000000000000000a0000000a00000000000000080000000e000e000000080000000000000000000000
0000000000000b000000000000000800000000000e00000000000a00000000000a00000000000a00000000000e000000000008000000000000000b0000000000
00000000000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a00000000000000
0b000b000b000000000009000000000000000000000008000900000000000000000000000000000009000800000000000000000000000900000000000b000b00
000000000000000000000000080000000e000e000e000000000000000a000000000000000a000000000000000e000e000e000000080000000000000000000000
0000000000000a0000000000000008000000000000000000000000000000000000000000000000000000000000000000000008000000000000000a0000000000
00000000000000000a00000000000000000000000000080009000a0000000b0000000b0000000a00090008000000000000000000000000000a00000000000000
0b000b000b0000000000090000000000000000000000000000000000000000000b0000000000000000000000000000000000000000000900000000000b000b00
000000000000000000000000080000000e000e000e00000000000000000000000000000000000000000000000e000e000e000000080000000000000000000000
0000000000000a000000000000000000000000000000080009000a000a000000000000000a000a000900080000000000000000000000000000000a0000000000
00000000000000000a00000000000800000000000000000000000000000000000000000000000000000000000000000000000800000000000a00000000000000
0b0000000b000000000009000000000000000000000000000000000000000b0000000b000000000000000000000000000000000000000900000000000b000000
00000b0000000000000000000000000000000e000e000e00080009000a0000000b0000000a00090008000e000e000e0000000000000000000000000000000b00
0000000000000a0000000000080000000e000000000000000000000000000000000000000000000000000000000000000e0000000800000000000a0000000000
00000000000000000a0000000000000000000000000000000800090000000b0000000b0000000900080000000000000000000000000000000a00000000000000
0b000b000b00000000000000000008000000000000000000000000000a0000000b0000000a00000000000000000000000000080000000000000000000b000b00
0000000000000000000009000000000000000e000e000e000e00080009000a0000000a00090008000e000e000e000e0000000000000009000000000000000000
0000000000000b00000000000000000000000000000000000000080009000a000a000a00090008000000000000000000000000000000000000000b0000000000
00000000000000000000000009000000080000000000000000000000080009000a00090008000000000000000000000008000000090000000000000000000000
0b000b000b0000000a00000000000000000000000000000000000000000008000900080000000000000000000000000000000000000000000a0000000b000b00
00000000000000000000000000000800000000000e000e000e000e000e000000080000000e000e000e000e000e00000000000800000000000000000000000000
000000000000000000000a000000000000000800000000000000000000000e0008000e000000000000000000000008000000000000000a000000000000000000
0b00000000000b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b0000000000
00000b000b000000000000000900000000000000000000000000000000000000000000000000000000000000000000000000000009000000000000000b000b00
00000000000000000a000000000000000800000000000e000e000e000e000e000e000e000e000e000e000e000000000008000000000000000a00000000000000
00000000000000000000000000000000000000000800000000000000000000000000000000000000000000000800000000000000000000000000000000000000
0b00000000000b0000000a000000090000000000000000000000000000000000000000000000000000000000000000000000090000000a0000000b0000000000
00000b000b000000000000000000000000000800000000000000000000000000000000000000000000000000000008000000000000000000000000000b000b00
00000000000000000000000000000000000000000000000000000e000e000e000e000e000e000e00000000000000000000000000000000000000000000000000
0b000000000000000a0000000900000009000000000000000e0000000000000000000000000000000e0000000000000009000000090000000a00000000000000
00000000000000000000000000000000000000000000080000000000000000000000000000000000000008000000000000000000000000000000000000000000
00000b000b000b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b000b000b00
000000000000000000000a000000090000000000080000000000000000000000000000000000000000000000080000000000090000000a000000000000000000
0a000000000000000000000000000000000009000000000000000000080008000800080008000000000000000000090000000000000000000000000000000000
00000000000000000b00000000000000000000000000000000000800000000000000000000000800000000000000000000000000000000000b00000000000000
00000b000b000b00000000000a0000000000000000000000080000000000000000000000000000000800000000000000000000000a00000000000b000b000b00
0a000000000000000000000000000000090000000000080000000000000000000000000000000000000008000000000009000000000000000000000000000000
000000000000000000000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a000000000000000000
0a000b00000000000000000000000a00000000000900000000000000000000000000000000000000000000000900000000000a00000000000000000000000b00
000000000b000b000b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b000b000b000000
0000000000000000000000000a0000000000090000000000000000000800080008000800080000000000000000000900000000000a0000000000000000000000
09000a00000000000000000000000000000000000000000000000800000000000000000000000800000000000000000000000000000000000000000000000a00
000000000000000000000b00000000000a000000000000000900000000000000000000000000000009000000000000000a00000000000b000000000000000000
090000000b000b000b00000000000000000000000000090000000000000000000000000000000000000009000000000000000000000000000b000b000b000000
00000a00000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000a00
09000000000000000000000000000000000000000900000000000000000000000000000000000000000000000900000000000000000000000000000000000000
00000a000b000000000000000b0000000000000000000000000000000000000000000000000000000000000000000000000000000b000000000000000b000a00
0000000000000b0000000b000000000000000a0000000000000000000900090009000900090000000000000000000a000000000000000b0000000b0000000000
080009000a0000000b000000000000000a000000000000000000090000000000000000000000090000000000000000000a000000000000000b0000000a000900
0000000000000000000000000000000000000000000000000a0000000000000000000000000000000a0000000000000000000000000000000000000000000000
0800090000000b000000000000000b000000000000000a000000000000000000000000000000000000000a000000000000000b000000000000000b0000000900
000000000a0000000b000b000b0000000000000000000000000000000000000000000000000000000000000000000000000000000b000b000b0000000a000000
00000800000000000000000000000000000000000a00000000000000000000000000000000000000000000000a00000000000000000000000000000000000800
0e00000009000a00000000000000000000000a0000000000000000000000000000000000000000000000000000000a00000000000000000000000a0009000000
00000800090000000b000000000000000b00000000000000000000000a000a000a000a000a00000000000000000000000b000000000000000b00000009000800
0000000000000a0000000b000b000b00000000000000000000000a00000000000000000000000a00000000000000000000000b000b000b0000000a0000000000
0e00000008000000000000000000000000000000000000000a0000000000000000000000000000000a0000000000000000000000000000000000000008000000
00000e00000009000a000000000000000000000000000a000000000000000000000000000000000000000a000000000000000000000000000a00090000000e00
000000000800090000000b0000000000000000000b00000000000000000000000000000000000000000000000b0000000000000000000b000000090008000000
00000000000000000a0000000b0000000b000b0000000000000000000000000000000000000000000000000000000b000b0000000b0000000a00000000000000
0e000e00000008000000000000000b00000000000000000000000000000000000000000000000000000000000000000000000b00000000000000080000000e00
000000000e00000009000a00000000000000000000000000000000000b000a000a000a000b00000000000000000000000000000000000a00090000000e000000
0000000000000800090000000b00000000000000000000000b000b00000000000000000000000b000b00000000000000000000000b0000000900080000000000
000000000000000000000a0000000b000b000b000b000b000000000000000000000000000000000000000b000b000b000b000b0000000a000000000000000000
0e000e000e000e00080009000a0000000000000000000000000000000000000000000000000000000000000000000000000000000a00090008000e000e000e00
00000000000000000800090000000000000000000000000000000000000000000000000000000000000000000000000000000000000009000800000000000000
0000000000000000000000000a000b00000000000000000000000000000000000000000000000000000000000000000000000b000a0000000000000000000000
000000000000000000000800090000000b000b000b000b000b000b000b000b000b000b000b000b000b000b000b000b000b000000090008000000000000000000

